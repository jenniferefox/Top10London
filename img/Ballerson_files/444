(function(u,y){function B(d){this.time=d.time;this.target=d.target;this.rootBounds=d.rootBounds;this.boundingClientRect=d.boundingClientRect;this.intersectionRect=d.intersectionRect||z();this.isIntersecting=!!d.intersectionRect;d=this.boundingClientRect;d=d.width*d.height;var h=this.intersectionRect;h=h.width*h.height;this.intersectionRatio=d?h/d:0}function m(d,h){h=h||{};if("function"!==typeof d)throw Error("callback must be a function");if(h.root&&1!==h.root.nodeType)throw Error("root must be an Element");
this._checkForIntersections=G(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=d;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(h.rootMargin);this.thresholds=this._initThresholds(h.threshold);this.root=h.root||null;this.rootMargin=this._rootMarginValues.map(function(d){return d.value+d.unit}).join(" ")}function G(d,h){var f=null;return function(){f||(f=setTimeout(function(){d();f=null},h))}}function D(d,h,f,m){"function"===
typeof d.addEventListener?d.addEventListener(h,f,m||!1):"function"===typeof d.attachEvent&&d.attachEvent("on"+h,f)}function C(d,h,f,m){"function"===typeof d.removeEventListener?d.removeEventListener(h,f,m||!1):"function"===typeof d.detatchEvent&&d.detatchEvent("on"+h,f)}function A(d){if(d=d.getBoundingClientRect())return d.width&&d.height||(d={top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top}),d}function z(){return{top:0,bottom:0,left:0,right:0,width:0,
height:0}}if(!("IntersectionObserver"in u&&"IntersectionObserverEntry"in u&&"intersectionRatio"in u.IntersectionObserverEntry.prototype)){var E=y.documentElement,w=[];m.prototype.THROTTLE_TIMEOUT=100;m.prototype.POLL_INTERVAL=null;m.prototype.observe=function(d){if(!this._observationTargets.some(function(h){return h.element===d})){if(!d||1!==d.nodeType)throw Error("target must be an Element");this._registerInstance();this._observationTargets.push({element:d,entry:null});this._monitorIntersections()}};
m.prototype.unobserve=function(d){this._observationTargets=this._observationTargets.filter(function(h){return h.element!==d});this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())};m.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};m.prototype.takeRecords=function(){var d=this._queuedEntries.slice();this._queuedEntries=[];return d};m.prototype._initThresholds=function(d){d=d||[0];Array.isArray(d)||
(d=[d]);return d.sort().filter(function(d,f,m){if("number"!==typeof d||isNaN(d)||0>d||1<d)throw Error("threshold must be a number between 0 and 1 inclusively");return d!==m[f-1]})};m.prototype._parseRootMargin=function(d){d=(d||"0px").split(/\s+/).map(function(d){d=/^(-?\d*\.?\d+)(px|%)$/.exec(d);if(!d)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(d[1]),unit:d[2]}});d[1]=d[1]||d[0];d[2]=d[2]||d[0];d[3]=d[3]||d[1];return d};m.prototype._monitorIntersections=
function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(D(u,"resize",this._checkForIntersections,!0),D(y,"scroll",this._checkForIntersections,!0),"MutationObserver"in u&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(y,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))};m.prototype._unmonitorIntersections=
function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,C(u,"resize",this._checkForIntersections,!0),C(y,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))};m.prototype._checkForIntersections=function(){var d=this._rootIsInDom(),h=d?this._getRootRect():z();this._observationTargets.forEach(function(f){var m=f.element,g=A(m),e=this._rootContainsTarget(m),
a=f.entry,c=d&&e&&this._computeTargetAndRootIntersection(m,h);f=f.entry=new B({time:u.performance&&performance.now&&performance.now(),target:m,boundingClientRect:g,rootBounds:h,intersectionRect:c});d&&e?this._hasCrossedThreshold(a,f)&&this._queuedEntries.push(f):a&&a.isIntersecting&&this._queuedEntries.push(f)},this);this._queuedEntries.length&&this._callback(this.takeRecords(),this)};m.prototype._computeTargetAndRootIntersection=function(d,h){if("none"!==u.getComputedStyle(d).display){var f=A(d);
d=d.parentNode;for(var m=!1;!m;){var g=null;d===this.root||1!==d.nodeType?(m=!0,g=h):"visible"!==u.getComputedStyle(d).overflow&&(g=A(d));if(g){var e=Math.max(g.top,f.top),a=Math.min(g.bottom,f.bottom),c=Math.max(g.left,f.left);f=Math.min(g.right,f.right);g=f-c;var k=a-e;f=0<=g&&0<=k&&{top:e,bottom:a,left:c,right:f,width:g,height:k};if(!f)break}d=d.parentNode}return f}};m.prototype._getRootRect=function(){if(this.root)var d=A(this.root);else{d=y.documentElement;var h=y.body;d={top:0,left:0,right:d.clientWidth||
h.clientWidth,width:d.clientWidth||h.clientWidth,bottom:d.clientHeight||h.clientHeight,height:d.clientHeight||h.clientHeight}}return this._expandRectByRootMargin(d)};m.prototype._expandRectByRootMargin=function(d){var h=this._rootMarginValues.map(function(f,h){return"px"===f.unit?f.value:f.value*(h%2?d.width:d.height)/100});h={top:d.top-h[0],right:d.right+h[1],bottom:d.bottom+h[2],left:d.left-h[3]};h.width=h.right-h.left;h.height=h.bottom-h.top;return h};m.prototype._hasCrossedThreshold=function(d,
h){d=d&&d.isIntersecting?d.intersectionRatio||0:-1;h=h.isIntersecting?h.intersectionRatio||0:-1;if(d!==h)for(var f=0;f<this.thresholds.length;f++){var m=this.thresholds[f];if(m===d||m===h||m<d!==m<h)return!0}};m.prototype._rootIsInDom=function(){return!this.root||E.contains(this.root)};m.prototype._rootContainsTarget=function(d){return(this.root||E).contains(d)};m.prototype._registerInstance=function(){0>w.indexOf(this)&&w.push(this)};m.prototype._unregisterInstance=function(){var d=w.indexOf(this);
-1!==d&&w.splice(d,1)};u.IntersectionObserver=m;u.IntersectionObserverEntry=B}})(window,document);
(function(){function u(d,e){var a=e?d.creative.root.querySelector(".cb-styles"):d.creative.root.querySelector("#cb-styles"),c=!1,f=e?"."+d.id:"#"+d.id;a||(a=document.createElement("style"),e?a.className="cb-styles":a.id="cb-styles",a.type="text/css",a.innerHTML="[cab-layer] {position: absolute; top: 0; left: 0; width: 100%; height:100%}",d.creative.root.appendChild(a));for(d=0;d<a.sheet.cssRules.length;d++)if(e=a.sheet.cssRules[d],e.selectorText===f){c=e;break}c||(c=a.sheet.insertRule(f+"{}",a.sheet.cssRules.length),
c=a.sheet.cssRules[c]);return c}function y(d,e){function a(b,t,e){for(var q=0;q<b.children.length;q++){var d=b.children[q];if(d.hasAttribute("cab-layer")){var v=B(d,c,e);t.unshift(v);a(d,v.layers,v)}else"SCRIPT"===d.nodeName?-1===(d.getAttribute("type")||"").indexOf("json")&&c.scripts.push(d.innerHTML):a(d,t,e)}}var c=this;c.root=d;c.configuration=e;c.context=e.data;c.inSegment=function(b){return c.context.segments&&c.context.segments[b]?!0:!1};c.inject=function(b,a){function t(b,a){if(b.nodeType===
Node.ELEMENT_NODE){for(var e=0;e<b.childNodes.length;e++)t(b.childNodes[e],a);for(e=0;e<b.attributes.length;e++){var d=b.attributes[e];d.value=q(""+d.value,a);if("cab-click"===d.name){var v=c.getLayerByElement(b);v&&(v.settings.events||(v.settings.events={click:[]}),v.settings.events.click.push({name:"go",settings:{url:d.value}}),v.element.style.cursor="pointer",v.element.addEventListener("click",function(){v.fire("click");return!0},!0))}"cab-image"===d.name&&(v=c.getLayerByElement(b))&&(v.element.style.backgroundImage=
"url("+d.value+")",v.styles.backgroundImage=d.value)}}else b.nodeType===Node.TEXT_NODE&&(b.data=q(""+b.data,a))}function q(b,c){return b.replace(/{{([^}]+)}}/gi,function(b,a){return c[a]||""})}var e=b.parentNode;if(Array.isArray(a))for(var d=0;d<a.length;d++){var l=b.cloneNode(!0);e.appendChild(l);t(l,a[d])}else t(b,a)};c.getLayerByElement=function(b,a){a=a?a.layers:c.layers;for(var t=0;t<a.length;t++){if(a[t].element===b)return a[t];if(0<a[t].layers.length){var q=c.getLayerByElement(b,a[t]);if(q)return q}}return null};
c.getLayer=function(b,a){a=a?a.layers:c.layers;for(var t=0;t<a.length;t++){if(a[t].id===b)return a[t];if(0<a[t].layers.length){var q=c.getLayer(b,a[t]);if(q)return q}}return null};c.openUrl=function(b){var a={url:b,protocol:"http:"===window.location.protocol?"http:":"https:"};b="";c.dispatchEvent("click",a);f.tag.click&&(b+=f.tag.click);if(f.tagging){var q=[];for(e in f.tagging)f.tagging.hasOwnProperty(e)&&q.push(encodeURIComponent(e)+"\x3d"+encodeURIComponent(f.tagging[e]));0<q.length&&(-1===a.url.indexOf("?")?
a.url+="?"+q.join("\x26"):a.url+="\x26"+q.join("\x26"))}var e=a.protocol+"//"+f.self+"/click/"+f.advertiser+"/"+f.impression+"/";a=a.url;q="";for(var d=0,l=a.length,n,k,r;d<l;){n=a.charCodeAt(d++)&255;if(d===l){q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt(n>>2);q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt((n&3)<<4);q+="\x3d\x3d";break}k=a.charCodeAt(d++);if(d===l){q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt(n>>
2);q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt((n&3)<<4|(k&240)>>4);q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt((k&15)<<2);q+="\x3d";break}r=a.charCodeAt(d++);q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt(n>>2);q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt((n&3)<<4|(k&240)>>4);q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt((k&
15)<<2|(r&192)>>6);q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\x3d".charAt(r&63)}b+=e+q;f.preview&&(b+="?preview\x3d1");if(window.mraid)window.mraid.open(b);else{e=document.createElement("a");e.href=b;e.target="_blank";try{var g=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0})}catch(F){g=document.createEvent("MouseEvent"),g.initMouseEvent("click",!1,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(e)}e.dispatchEvent(g)}f.tag.clickpixel&&c.pixel(f.tag.clickpixel)};
c.pixel=function(b){var a=new Image(1,1);a.onload=function(){};a.src=b};var k={},g={};c.report=c.fpSet=function(b,a){k[b]=a};c.fp=function(){};var p="",b="";c.heartbeat=function(){var a;if(!f.preview){var c=""+f.fingerprint;var e=[];for(a in k)k.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"\x3d"+encodeURIComponent(k[a]));c+=e.join(";");c!==p&&(p=c,e=new Image(1,1),c+="?"+(Date.now()+Math.random()),e.onload=function(){},e.src=c);if(0!==r||0!==n){c=""+f.stat;e=[];for(a in g)g.hasOwnProperty(a)&&
g[a]&&e.push(encodeURIComponent(a)+"\x3d"+encodeURIComponent(g[a]));c+=e.join(";");c!==b&&(b=c,e=new Image(1,1),c+="?"+(Date.now()+Math.random()),e.onload=function(){},e.src=c)}}};c.jsonp=function(b,a){var c=document.createElement("script"),e=document.getElementsByTagName("script")[0];c.src=b;c.async=!0;c.defer=!0;c.onload=a||function(){};e.parentNode.insertBefore(c,e)};c.getFeed=function(b,a,c,e){var d=("https:"===window.location.protocol?"https:":"http:")+"//"+(f.dmp?f.dmp:"dmp.cabla.to");d+="/feed/"+
f.advertiser+"/"+b+"/"+a+"/";try{d+=f.data.ids.cablato}catch(L){}d+="?rnd\x3d"+(Date.now()+Math.random());if(e)for(var q in e)d+="\x26"+encodeURIComponent(q)+"\x3d"+encodeURIComponent(e[q]);z({url:d,always:c})};c.getJSON=function(b,a){z({url:b,always:a})};c.clone=function(b,a){for(var e=1;c.root.querySelector("#"+b.id+"-"+e);)++e;var d=b.id+"-"+e;c.settings[d]=w({},b.settings);e=document.createElement("div");e.outerHTML=b.element.outerHTML;e.setAttribute("id",d);b.element.parentNode.insertBefore(e,
b.element.nextSibling);d=B(e,c,b.parent);a=a||c;e=a.layers.indexOf(b);e===a.leyers.length-1||-1===e?a.layers.push(d):a.layers.splice(e+1,0,d);for(a=0;a<b.layers.length;a++)c.clone(b.layers[a],d);return d};c.animate=function(b,a,c){b&&a&&a.from&&a.to&&(new C).play({element:b},{source:a.from,target:a.to,duration:a.duration||300,easing:a.easing||"easeIn"},c)};c.fit=function(b){if(b){var a=parseFloat(window.getComputedStyle(b,null).getPropertyValue("font-size"));for(b.style.fontSize=a+1+"px";0>Math.min(b.offsetHeight-
b.scrollHeight,b.offsetWidth-b.scrollWidth)&&0<a;)--a,b.style.fontSize=a+1+"px"}};c.expand=function(){if(c.expanded&&"expanded"!==c.state){c.collapsed&&(c.collapsed.visible=!1,c.collapsed.applyVisibility());if(c.expanded.settings.direction&&"top"==c.expanded.settings.direction){var b=parseInt(c.collapsed.styles.height,10)-parseInt(c.expanded.styles.height,10);c.root.style.marginTop=b+"px"}c.root.style.width=c.expanded.styles.width;c.root.style.height=c.expanded.styles.height;window.mraid&&(b=window.mraid.getScreenSize(),
c.root.style.width=b.width+"px",c.root.style.height=b.height+"px",c.expanded.element.style.width=b.width+"px",c.expanded.element.style.height=b.height+"px",window.mraid.expand());if(window.$sf){b={push:!1,t:0,l:0,r:0,b:0};var a=window.$sf.ext.geom().exp,e=parseInt(c.collapsed.styles.width,10),d=parseInt(c.collapsed.styles.height,10);var n=-1!==c.expanded.styles.width.indexOf("%")?Math.round((parseInt(a.l,10)+parseInt(a.r,10)+e)*(parseInt(c.expanded.styles.width,10)/100)):parseInt(c.expanded.styles.width,
10);a.l=Math.min(e+(n-e),a.l);a.r=Math.min(e+(n-e),a.r);var l=-1!==c.expanded.styles.height.indexOf("%")?Math.round((parseInt(a.t,10)+parseInt(a.b,10)+d)*(parseInt(c.expanded.styles.height,10)/100)):parseInt(c.expanded.styles.height,10);a.t=Math.min(d+(l-d),a.t);a.b=Math.min(d+(l-d),a.b);c.expanded.settings.push&&(b.push=!!c.expanded.settings.push);c.root.style.width=n+"px";c.root.style.height=l+"px";switch(c.expanded.settings.direction||"bottom"){case "left":b.l=a.l;break;case "right":b.r=a.r;break;
case "top":b.t=a.t;break;case "all":b.t=b.b=(l-d)/2;b.l=b.r=(n-e)/2;break;default:b.b=a.b}window.$sf.ext.expand(b)}else if(b=window.frameElement)b.style.width=c.expanded.styles.width,b.style.height=c.expanded.styles.height;c.expanded.visible=!0;c.expanded.applyVisibility();c.state="expanded"}};c.close=function(){if(c.expanded&&"expanded"===c.state)if(c.expanded.visible=!1,c.expanded.applyVisibility(),c.collapsed?(c.expanded.settings.direction&&"up"==c.expanded.settings.direction&&(c.root.style.marginTop=
"0px"),c.root.style.width=c.collapsed.styles.width,c.root.style.height=c.collapsed.styles.height,c.collapsed.visible=!0,c.collapsed.applyVisibility(),c.state="collapsed"):c.state="hidden",window.mraid&&window.mraid.close(),window.$sf)c.root.style.width=c.collapsed.styles.width,c.root.style.height=c.collapsed.styles.height,window.$sf.ext.collapse();else{var b=window.frameElement;b&&(b.style.width=c.collapsed.styles.width,b.style.height=c.collapsed.styles.height)}};var l={};c.addEventListener=function(b,
a){l[b]||(l[b]=[]);l[b].push(a)};c.removeEventListener=function(b,a){l[b]&&(a=l[b].indexOf(a),-1!==a&&l[b].splice(a,1))};c.dispatchEvent=function(b){if(l[b]){var a=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);a.shift();for(var e=0;e<l[b].length;e++)l[b][e].apply(c,a)}};var r=0,n=0;this.addEventListener("ad.ready",function(){var b=null,a=0;(new window.IntersectionObserver(function(c){b&&(window.clearInterval(b),b=null);.5>c[0].intersectionRatio||(b=window.setInterval(function(){++a;
-1!==[1].indexOf(a)&&(r=a,g.iv=r)},1E3))},{threshold:[.5]})).observe(d);var e=null,l=0;c.root.addEventListener("mouseleave",function(){e&&(window.clearInterval(e),e=null)});c.root.addEventListener("mouseenter",function(){e&&(window.clearInterval(e),e=null);e=window.setInterval(function(){++l;-1!==[1].indexOf(l)&&(n=l,g.hv=n)},1E3)});window.setInterval(function(){c.heartbeat()},1E3);try{for(var f=window;f.parent!==f;)g.ur=f.document.referrer,f=f.parent}catch(K){}});return function(){d.innerHTML='\x3cstyle\x3e.preload-spinner{position:absolute;top:0;left:0;width:100%;height:100%;z-index:5000;background-color:#fff}.signal{display:block;position:relative;left:50%;top:50%;width:100px;height:100px;margin:-50px 0 0 -50px;z-index:5001;border-radius:50%;border:3px solid transparent;border-top-color:#3498db;-webkit-animation:spin 2s ease infinite;animation:spin 2s ease infinite}.signal:before{content:"";position:absolute;top:7px;left:7px;right:7px;bottom:7px;border-radius:50%;border:3px solid transparent;border-top-color:#e74c3c;-webkit-animation:spin 1.5s linear infinite;animation:spin 1.5s linear infinite}.signal:after{content:"";position:absolute;top:19px;left:19px;right:19px;bottom:19px;border-radius:50%;border:3px solid transparent;border-top-color:#f9c922;-webkit-animation:spin 3s ease infinite;animation:spin 3s ease infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{-ms-transform:rotate(0deg);transform:rotate(0deg)}100%{-ms-transform:rotate(360deg);transform:rotate(360deg)}}\x3c/style\x3e\x3cdiv class\x3d"preload-spinner"\x3e\x3cdiv class\x3d"signal"\x3e\x3c/div\x3e\x3c/div\x3e';
d.innerHTML+=e.content;var b="http:"===window.location.protocol?"http:":"https:";f.fingerprint=b+"//"+f.self+"/fp/"+f.advertiser+"/"+f.campaign_id+"/"+f.id+"/"+f.impression+"/";f.stat=b+"//"+f.self+"/stat/"+f.advertiser+"/"+f.campaign_id+"/"+f.id+"/"+f.impression+"/";b=d.querySelector("#cb-settings,.cb-settings");c.settings={};if(b)try{var l=JSON.parse(b.innerHTML);Array.isArray(l)?l.forEach(function(b){c.settings[b.layer]=b.settings}):c.settings=l}catch(F){}b=d.querySelector("#cb-effects,.cb-effects");
c.timelines={};if(b)try{l=JSON.parse(b.innerHTML),l.forEach(function(b){var a=new D(b.name);a.load(b.animations);c.timelines[b.name]=a})}catch(F){}if(l=d.querySelector("#cb-timelines")){c.timelines={};try{var n=l.sheet;for(l=0;l<n.cssRules.length;l++){var k=n.cssRules.item(l);if(1===k.type){var r=k.selectorText.split(" ")[0].substr(12);c.timelines[r]||(c.timelines[r]=new G(r,c))}}}catch(F){}}c.layers=[];c.scripts=[];a(d,c.layers);c.scripts.forEach(function(b){try{(new Function("creative",b)).apply(c,
[c])}catch(J){console.error(J)}});try{if(c.context.location&&c.context.location.location){var g=c.context.location.location,p;for(p in c.context.segments)if(c.context.segments.hasOwnProperty(p)){var x=c.context.segments[p];if(x.latitude&&x.longitude){var m=h(g[0],g[1],x.latitude,x.longitude);x.radius/1E3<m&&delete c.context.segments[p]}}}}catch(F){}c.layers.forEach(function(b){b.dataBind(c.configuration)});window.$sf&&(n=window.$sf.ext.geom().self,window.$sf.ext.register(n.w,n.h,function(b,a){}));
window.vpaid&&(window.vpaid.creative=c);c.expanded&&(c.collapsed?(c.state="collapsed",c.collapsed.visible=!0,c.expanded.visible=!1,window.mraid&&(window.mraid.setExpandProperties({useCustomClose:!0,isModal:!0}),window.mraid.addEventListener("stateChange",function(b){"default"===b&&"expanded"===c.state&&(c.state="collapsed",c.collapsed.visible=!0,c.collapsed.applyVisibility(),c.expanded.visible=!0,c.expanded.applyVisibility())})),window.$sf&&(n=window.$sf.ext.geom().self,c.collapsed.styles.width=n.w+
"px",c.collapsed.styles.height=n.h+"px")):(c.state="expanded",c.expanded.visible=!0,window.mraid&&(window.mraid.setExpandProperties({useCustomClose:!1,isModal:!0}),window.mraid.addEventListener("stateChange",function(b){"hidden"===b&&"hidden"!==c.state&&(c.state="hidden",c.expanded.visible=!1,c.expanded.applyVisibility())}),n=window.mraid.getScreenSize(),c.root.style.width=n.width+"px",c.root.style.height=n.height+"px",c.expanded.element.style.width=n.width+"px",c.expanded.element.style.height=n.height+
"px")));c.dispatchEvent("ad.parsed");var u=[];c.layers.forEach(function(b){u.push(b)});c.layers.forEach(function(b){b.preload(u,function(){var b=document.querySelector(".preload-spinner");b&&b.parentNode.removeChild(b);c.layers.forEach(function(b){b.applyVisibility()});c.fp();c.dispatchEvent("ad.ready");window.vpaid&&window.vpaid.Ad&&window.vpaid.Ad.dispatch("AdLoaded")})});0===c.layers.length&&(n=document.querySelector(".preload-spinner"))&&n.parentNode.removeChild(n)}()}function B(d,e){function a(b){for(var a=
1,c=e.insertion.querySelector("#"+b+"_"+a);c;)++a,c=e.insertion.querySelector("#"+b+"_"+a);return b+"_"+a}var c=d.getAttribute("cab-layer")||"block",k=d.getAttribute("id")||a(c),g=e.settings[k]||!1,p={cms:{preload:function(b,a,c){var e=b.creative,d;for(d in b.settings.cms)if(0<=d.indexOf(",")){var l=d.split(",").map(function(b){return b.trim()});for(var f in l)if(e.inSegment(l[f])){var k=b.settings.cms[d],r;for(r in k){var g=e.getLayer(r,b);g&&(g.element.innerHTML=k[r])}}}else if(e.inSegment(d))for(r in k=
b.settings.cms[d],k)if(g=e.getLayer(r,b))g.element.innerHTML=k[r];b.fire("loaded");b=a.indexOf(b);-1!==b&&a.splice(b,1);0===a.length&&c&&c()}},block:{},image:{init:function(b){b.styles.backgroundImage&&u(b).style.setProperty("background-image","none")},preload:function(b,a,c){if(b.styles.backgroundImage){var e=new Image;e.onload=e.onerror=function(){u(b).style.setProperty("background-image","url("+e.src+")");b.prelaoding=!1;b.preloaded=!0;b.fire("loaded");var d=a.indexOf(b);-1!==d&&a.splice(d,1);
0===a.length&&c&&c()};e.src=b.styles.backgroundImage.replace(/url\(\"?([^\)\"]+)\"?\)/i,"$1")}else{b.fire("loaded");var d=a.indexOf(b);-1!==d&&a.splice(d,1);0===a.length&&c&&c()}}},expanded:{init:function(b){b.creative.expanded=b}},expand:{init:function(b){b.creative.expanded=b}},collapsed:{init:function(b){b.creative.collapsed=b}},collapse:{init:function(b){b.creative.collapsed=b}},video:{init:function(b){var a=b.settings.video,c='\x3cvideo style\x3d"width:100%;height:100%" playsinline';a.poster&&
(c+=' poster\x3d"'+a.poster+'"');a.nomute||(c+=" muted");a.clicktoplay||(c+=" autoplay");b.element.innerHTML=c+"\x3e\x3c/video\x3e";var d=b.element.querySelector("video"),f=-1,k=0;d.addEventListener("ended",function(){b.fire("ended");e.dispatchEvent("video.ended",b)});d.addEventListener("pause",function(){b.fire("pause");e.dispatchEvent("video.pause",b)});d.addEventListener("play",function(){b.fire("play");e.dispatchEvent("video.play",b);isFinite(d.duration)||(f=d.duration)});d.addEventListener("progress",
function(){-1!==f&&Math.floor(d.currentTime/(f/4))>k&&(++k,e.dispatchEvent("video.quartile",b,k))});b.seek=function(a){d.currentTime=a;e.dispatchEvent("video.skipped",b,a)};b.play=function(a){e.dispatchEvent("video.play",b);0===d.currentTime&&(b.fire("play"),isFinite(d.duration)||(f=d.duration));d.play()};b.pause=function(a){d.pause();e.dispatchEvent("video.paused",b)};b.mute=function(a){d.muted=!0;e.dispatchEvent("video.muted",b)};b.unmute=function(a){d.muted=!1;e.dispatchEvent("video.unmuted",b)}},
preload:function(b,a,c){var e=b.element.querySelector("video"),d=b.settings.video,f='\x3csource src\x3d"'+d.asset+'"\x3e';d.backup&&(f+='\x3csource src\x3d"'+d.backup+'"\x3e');e.innerHTML=f;b.fire("loaded");b=a.indexOf(b);-1!==b&&a.splice(b,1);0===a.length&&c&&c()},action:function(b,a){b=b.element.querySelector("video");switch(a.name){case "play":b.play();break;case "pause":b.pause()}}},text:{init:function(b){b.refit=function(){b.creative.fit(b.element)};b.settings.fit&&(b.creative.addEventListener("ad.ready",
b.refit),b.creative.addEventListener("text.refit",b.refit))}},iframe:{init:function(b){b.element.innerHTML='\x3ciframe style\x3d"width:100%;height:100%;border:none;top:0;left:0;"\x3e\x3c/iframe\x3e'},preload:function(b,a,c){var d=b.element.querySelector("iframe");d.setAttribute("src",b.settings.iframe.asset);d.contentWindow.creative=e;b.fire("loaded");b=a.indexOf(b);-1!==b&&a.splice(b,1);0===a.length&&c&&c()}},slider:{preload:function(b,a,c){b.settings.slider||(b.settings.slider={count:40,delay:3E3,
direction:"h",speed:300});var e=parseInt(b.settings.slider.count||40,10),d=parseInt(b.settings.slider.delay||3E3,10),f=b.settings.slider.direction||"h",k=parseInt(b.settings.slider.speed||300,10),l=0,g=b.element.querySelector(".cb-slides-i");if(g){for(var r=0;r<b.layers.length;r++){var p=b.layers[r].element;b.element.appendChild(p)}b.element.removeChild(g)}b.element.style.overflow="hidden";g=document.createElement("div");g.className="cb-slides-i";g.style.overflow="hidden";g.style.position="absolute";
b.element.appendChild(g);for(r=0;r<b.layers.length;r++)p=b.layers[r].element,p.style.display="block",p.style.position="relative","h"===f?(p.style.width="33.33%",p.style.height="100%",p.style.float="left"):(p.style.height="v"===f?"33.33%":"100%",p.style.width="100%"),g.appendChild(p);var h=0;"h"===f?(g.style.width="300%",g.style.height="100%"):"v"===f?(h=b.element.offsetHeight,g.style.height="300%",g.style.width="100%"):(g.style.width="100%",g.style.height="100%");b.interval&&window.clearInterval(b.interval);
var x=!1;b.slide=function(a){if(!(2>g.children.length||x)){x=!0;var c={duration:k,easing:"easeInOut",from:{},to:{}};"o"===f&&(c.duration=k/2);"v"===f?(c.from.marginTop="-"+h+"px",c.to.marginTop=a?"-"+2*h+"px":"0px"):"h"===f?(c.from.marginLeft="-100%",c.to.marginLeft=a?"-200%":"0%"):(c.from.opacity="1",c.to.opacity="0");b.creative.animate(g,c,function(){"v"===f?g.style.marginTop="-"+h+"px":"h"===f?g.style.marginLeft="-100%":(c.from.opacity="0",c.to.opacity="1",b.creative.animate(g,c));a?g.appendChild(g.children[0]):
g.prepend(g.children[g.children.length-1]);x=!1})}};b.interval=window.setInterval(function(){3E4<=l*(k+d)||e<=l?(window.clearInterval(b.interval),b.interval=null):(++l,b.slide(1))},d);b.fire("loaded");r=a.indexOf(b);-1!==r&&a.splice(r,1);0===a.length&&c&&c()},action:function(b,a){b.interval&&window.clearInterval(b.interval);switch(a.name){case "slide-forward":b.slide(1);break;case "slide-back":b.slide(0)}}},retarget:{preload:function(b,a,c){var e="https:"===window.location.protocol?"https:":"http:",
d="";d=f.dmp?e+"//"+f.dmp:e+"//dmp.cabla.to";e="";try{e=f.data.ids.cablato}catch(I){e=""}d+="/feed/"+f.advertiser+"/"+b.settings.retarget.feed+"/"+b.settings.retarget.number+"/"+e;var k=b.creative;if(b.settings.retarget.strategy&&(d+="?st\x3d"+b.settings.retarget.strategy,b.settings.retarget.filters&&(d+="\x26f\x3d"+encodeURIComponent(b.settings.retarget.filters)),!0===b.settings.retarget.exclusive&&(d+="\x26ex\x3d1"),b.settings.retarget.parameters))for(var g in b.settings.retarget.parameters)b.settings.retarget.parameters.hasOwnProperty(g)&&
(d+="\x26"+encodeURIComponent(g)+"\x3d"+encodeURIComponent(b.settings.retarget.parameters[g]));z({url:d,success:function(a){var c=b.element.querySelector("[product-tile]"),e=c.parentNode;if(b.template)var d=b.template;else d=c.outerHTML,b.template=d,e.removeChild(c);"retarget"!==e.getAttribute("cab-layer")?(c=b.creative.getLayer(e.parentNode.getAttribute("id")),c.settings&&c.settings.slider&&c.settings.slider.direction&&(1<a.length&&"h"===c.settings.slider.direction?e.style.marginLeft="-100%":1<a.length&&
"v"===c.settings.slider.direction&&(e.style.marginTop="-"+c.element.offsetHeight+"px"),0<a.length&&"o"!==c.settings.slider.direction&&a.unshift(a.pop()))):c=b.creative.getLayer(e.getAttribute("id"));k.dispatchEvent("products.received",a);c.layers=[];e.innerHTML="";for(c=0;c<a.length;c++){var f=a[c],g=document.createElement("div"),l=d.replace(/{{([^}]+)}}/gi,function(a,b){return f[b]||""});e.appendChild(g);g.outerHTML=l;g=e.children[e.children.length-1];l=f.image_url?f.image_url.replace("'","%27").replace('"',
"%22").replace(" ","%20"):"";for(var n=g.querySelectorAll("[product-image]"),p=0;p<n.length;p++)n[p].style.backgroundImage="url("+l+")",n[p].style.backgroundRepeat="no-repeat";g.setAttribute("product-url",f.detail_url);g.setAttribute("product-id",f.product_id);g.addEventListener("click",function(a){var b=a.currentTarget.getAttribute("product-url");a=a.currentTarget.getAttribute("product-id");k.dispatchEvent("product.click",b,a);k.openUrl(b)},!0);g.style.cursor="pointer"}k.dispatchEvent("products.loaded",
a,e);k.dispatchEvent("text.refit")},error:function(){var a=b.element.querySelector("[product-tile]").parentNode;k.dispatchEvent("products.received",[]);k.dispatchEvent("products.loaded",[],a);k.dispatchEvent("text.refit");k.dispatchEvent("products.failed")},always:function(){b.preloaded=!0;var e=a.indexOf(b);-1!==e&&a.splice(e,1);0===a.length&&c&&c()}})},action:function(a,c){switch(c.name){case "reload":a.preloading=!1,a.preloaded=!1,a.preload([],function(){})}}},feed:{preload:function(a,c,e){if(a.settings.clone){a.preloaded=
!0;var b=c.indexOf(a);-1!==b&&c.splice(b,1);0===c.length&&e&&e()}else{var d="https:"===window.location.protocol?"https:":"http:";b=d+"//dmp.cabla.to";f.dmp&&(b=d+"//"+f.dmp);d="";try{d=f.data.ids.cablato}catch(I){d=""}b+="/feed/"+f.advertiser+"/"+a.settings.feed+"/"+a.settings.number+"/"+d;var g=a.creative;if(a.settings.strategy&&(b+="?st\x3d"+a.settings.strategy,a.settings.filters&&(b+="\x26f\x3d"+encodeURIComponent(a.settings.filters)),!0===a.settings.exclusive&&(b+="\x26ex\x3d1"),a.settings.parameters))for(var k in a.settings.parameters)a.settings.parameters.hasOwnProperty(k)&&
(b+="\x26"+encodeURIComponent(k)+"\x3d"+encodeURIComponent(a.settings.parameters[k]));z({url:b,success:function(b){g.dispatchEvent("products.received",b);g.dispatchEvent("feed.received",b);for(var c=[a],e=1;e<b.length;e++){var d=g.clone(a);d.settings.clone=!0;c.push(d)}for(e=0;e<b.length;e++)c[e].populate(b[e]);g.dispatchEvent("products.loaded",b,parent);g.dispatchEvent("feed.loaded",b);g.dispatchEvent("text.refit")},always:function(){a.preloaded=!0;var b=c.indexOf(a);-1!==b&&c.splice(b,1);0===c.length&&
e&&e()}})}},action:function(a,c){switch(c.name){case "reload":a.preloading=!1,a.preloaded=!1,a.preload([],function(){})}}},random:{applyVisibility:function(a){if(!(2>a.layers.length))for(var b=Math.floor(Math.random()*a.layers.length),c=0;c<a.layers.length;c++)a.layers[c].visible=c!==b?!1:!0}},switch:{dataBind:function(a,c){if(!(2>a.layers.length)&&a.settings.switch){var b=a.settings.switch||[],e=a.settings.mode&&"recency"===a.settings.mode;if(0<b.length&&c.data.segments){var d=null,f=0;e&&(f=new Date("1970-01-01"));
for(var g in c.data.segments)if(c.data.segments.hasOwnProperty(g)&&-1!==b.indexOf(g))if(e){var k=new Date(c.data.segments[g]["last-hit"]);k>f&&(f=k,d=g)}else c.data.segments[g].counter>f&&(f=c.data.segments[g].counter,d=g);for(c=0;c<a.layers.length;c++)a.layers[c].settings.conditional&&(b=a.layers[c].settings.conditional,b.segments&&(-1!==b.segments.indexOf(d)?(a.layers[c].visible=b.visibility,a.layers[c].settings.conditional.segments=[d]):a.layers[c].visible=!b.visibility,a.layers[c].settings.conditional.segments=
[]))}}}},nearest:{},swipeable:{init:function(a){function b(a){k=!0;p=!1;h={x:a.clientX,y:a.clientY};a.changedTouches&&0<a.changedTouches.length&&(h={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY});g.addEventListener("mousemove",d);g.addEventListener("mouseup",c);g.addEventListener("mouseout",c);g.addEventListener("touchmove",d);g.addEventListener("touchend",c)}function c(b){function f(b){a.fire("swipe-"+b);e.dispatchEvent("swipe-"+b,a)}g.removeEventListener("mousemove",d);g.removeEventListener("mouseup",
c);g.removeEventListener("mouseout",c);g.removeEventListener("touchmove",d);g.removeEventListener("touchend",c);if(k){var p=b.clientX-h.x,n=b.clientY-h.y;b.changedTouches&&0<b.changedTouches.length&&(p=b.changedTouches[0].clientX-h.x,n=b.changedTouches[0].clientY-h.y);10>Math.sqrt(p*p+n*n)||(Math.abs(n)>Math.abs(p)?0<n?f("down"):f("up"):0<p?f("right"):f("left"))}}function d(a){if(k){var b=a.clientX-h.x,e=a.clientY-h.y;a.changedTouches&&0<a.changedTouches.length&&(b=a.changedTouches[0].clientX-h.x,
e=a.changedTouches[0].clientY-h.y);10<=Math.sqrt(b*b+e*e)&&(p=!0)}else g.removeEventListener("mousemove",d),g.removeEventListener("mouseup",c),g.removeEventListener("mouseout",c),g.removeEventListener("touchmove",d),g.removeEventListener("touchend",c),p=k=!1,h=null}var f=a.element,g=document.querySelector("body"),k=!1,p=!1,h=null;f.addEventListener("mousedown",b);f.addEventListener("touchstart",b);f.addEventListener("click",function(a){p&&(p=!1,a.stopPropagation(),a.preventDefault())},!0)}}};k=new m(c,
k);p[c]&&(k.hooks=p[c]);k.init(d,e,g);return k}function m(g,e){var a=this;a.id=e;a.type=g;a.layers=[];a.preloaded=!1;a.preloading=!1;a.visible=!1;a.init=function(c,e,d){a.element=c;a.creative=e;a.settings={events:{}};d&&(a.settings=d,a.settings.events&&a.settings.events.click&&(a.element.style.cursor="pointer",a.element.addEventListener("click",function(){a.fire("click");return!0},!0)));c=u(a);a.styles={top:"0px",left:"0px",width:"100%",height:"100%"};e=[];for(d=0;d<c.style.length;d++)e.push(c.style[d]);
for(d=0;d<e.length;d++){var g=e[d],b=E(g);"transform"===g?c.style[g].replace(/(\w+)\(([^\)]+)\)\s*/gi,function(b,c,e){a.styles[c]=parseFloat(e)}):a.styles[b]=c.style.getPropertyValue(g)}a.hooks.init&&a.hooks.init(a)};a.dataBind=function(c){if(a.settings.conditional){var e=a.settings.conditional;0<e.segments.length&&c.data.segments&&(d(Object.keys(c.data.segments),e.segments)?a.visible=e.visibility:a.visible=!e.visibility)}else a.visible=!0;a.hooks.dataBind&&a.hooks.dataBind(a,c);a.layers.forEach(function(a){a.dataBind(c)})};
a.populate=function(c){for(var e=u(a),d=function(a){return a.replace(/{{([^}]+)}}/gi,function(a,b){return c[b]||""})},g=function(a){for(var b in a)if(a.hasOwnProperty(b)){if("string"===typeof a[b]||a[b]instanceof String)a[b]=d(a[b]);a[b]&&"object"===typeof a[b]&&g(a[b])}},b=0;b<e.style.length;b++){var f=e.style.item(b);current[f]=d(e.style.getPropertyValue(f))}g(a.settings);e=a.element;for(b=0;b<e.attributes.length;b++)f=e.attributes[b],e.setAttribute(f,d(e.getAttribute(f)));for(b=0;b<a.layers.length;b++)a.layers[b].populate(c);
a.hooks.populate&&a.hooks.populate(a,context)};a.applyVisibility=function(){a.hooks.applyVisibility&&a.hooks.applyVisibility(a);if(a.visible){a.preload([],function(){a.element.style.display="";a.fire("show")});for(var c=0;c<a.layers.length;c++)a.layers[c].applyVisibility()}else a.element.style.display="none",a.fire("hide")};a.preload=function(c,e){if(!a.visible||a.preloaded||a.preloading){var d=c.indexOf(a);-1!==d&&c.splice(d,1);0===c.length&&e&&e()}else{for(d=0;d<a.layers.length;d++)c.push(a.layers[d]),
a.layers[d].preload(c,e);a.hooks.preload?(this.preloading=!0,a.hooks.preload(a,c,e)):(a.fire("loaded"),a.preloaded=!0,d=c.indexOf(a),-1!==d&&c.splice(d,1),0===c.length&&e&&e())}};a.fire=function(c){if(a.settings.events&&a.settings.events[c]){var e,d=a.creative;a.settings.events[c].forEach(function(c){switch(c.name){case "go":if(!c.settings.url)break;a.creative.openUrl(c.settings.url);break;case "fingerprint":if(!c.settings.kpi||!c.settings.value)break;a.creative.fpSet(c.settings.kpi,c.settings.value);
break;case "show":if(e=a.creative.getLayer(c.settings.layer))e.visible=!0,e.applyVisibility();break;case "hide":if(e=a.creative.getLayer(c.settings.layer))e.visible=!1,e.applyVisibility();break;case "expand":d.expand();break;case "close":d.close();break;case "animate":a.creative.timelines[c.settings.animation]&&a.creative.timelines[c.settings.animation].play(a.creative);break;case "stop":a.creative.timelines[c.settings.animation]&&a.creative.timelines[c.settings.animation].stop(a.creative);break;
case "script":(new Function("creative","layer",c.settings.script)).apply(a.creative,[a.creative,H]);break;default:var b=a.creative.getLayer(c.settings.layer);b.hooks.action&&b.hooks.action(b,c)}})}a.hooks.fire&&a.hooks.fire(a,c);a.creative.fp()};a.action=function(c){a.hooks.action&&a.hooks.action(a,c)};a.show=function(){a.visible=!0;a.applyVisibility();a.hooks.show&&a.hooks.show(a)};a.hide=function(){a.visible=!1;a.applyVisibility();a.hooks.hide&&a.hooks.hide(a)};a.hooks={}}function G(d,e){this.name=
d;this.creative=e;var a=this;a.load=function(){};a.stop=function(){window.requestAnimationFrame(function(){a.creative.root.classList.remove(a.name)})};a.play=function(){a.creative.root.classList.contains(a.name)&&a.creative.root.classList.remove(a.name);window.requestAnimationFrame(function(){a.creative.root.classList.add(a.name)});a.creative.root.classList.contains("cb-playing")||a.creative.root.classList.add("cb-playing")}}function D(d){this.name=d;this.transitions=[];this.timers=[];var e=this;
this.load=function(a){this.transitions=[];for(var c=0;c<a.length;c++){var e=new C;e.load(a[c]);this.transitions.push(e)}};this.stop=function(a){for(;0<e.timers.length;){var c=e.timers.pop();window.clearTimeout(c)}for(c=e.transitions.length-1;0<=c;c--){var d=e.transitions[c],g=a.getLayer(d.layer);d.rewind(g,d)}};this.play=function(a){function c(a,b){var c=window.setTimeout(function(){a.play(b,a)},a.start+a.delay);e.timers.push(c)}for(var d=0,g=0;g<this.transitions.length;g++){var f=this.transitions[g];
if(0===g)f.start=0;else{var b=this.transitions[g-1];f.start=f.chain?b.start+b.delay+b.duration:b.start}d<f.start+f.delay+f.duration&&(d=f.start+f.delay+f.duration);b=a.getLayer(f.layer);c(f,b)}}}function C(){this.layer="";this.delay=0;this.easing="easeIn";this.duration=400;this.chain=!0;this.source={};this.target={};this.load=function(e){this.layer=e.layer;this.delay=parseInt(e.delay,10);this.easing=e.easing;this.duration=parseInt(e.duration,10);this.chain=e.chain;this.source=e.source;this.target=
e.target};var d={linear:function(e){return e},easeIn:function(e){return e*e*e},easeOut:function(e){return--e*e*e+1},easeInOut:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},elasticIn:function(e){return 0===e?0:1===e?1:-(Math.pow(2,10*--e)*Math.sin(2*(e-.075)*Math.PI/.3))},elasticOut:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},elasticInOut:function(e){return 0===e?0:1===e?1:1>e?-.5*Math.pow(2,10*--e)*Math.sin(2*(e-.1125)*Math.PI/.45):Math.pow(2,
-10*--e)*Math.sin(2*(e-.1125)*Math.PI/.45)*.5+1},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var a=1.70158;return 1>(e/=.5)?.5*e*e*(((a*=1.525)+1)*e-a):.5*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)},bounceIn:function(e){return 1-d.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return.5>
e?.5*d.bounceIn(2*e):.5*d.bounceOut(2*e-1)+.5}};this.rewind=function(e,a){function c(a){return 0===a.indexOf("rotate")||0===a.indexOf("translate")||0===a.indexOf("scale")||0===a.indexOf("skew")?!0:!1}a.cancel=!0;window.setTimeout(function(){a.cancel=!1},13);var d=[],f;for(f in a.source)if(a.source.hasOwnProperty(f)){var g=a.source[f];c(f)?d.push(f+"("+g+")"):e.element.style[f]=g}d!==[]&&(e.element.style.transform=d.join(" "))};this.play=function(e,a,c){function f(a,b){a=l[a];a.current=a.to;b&&(a.current=
a.from+(a.to-a.from)*b)}function g(){var a=[],b;for(b in l){var c=b;c=0===c.indexOf("rotate")||0===c.indexOf("translate")||0===c.indexOf("scale")||0===c.indexOf("skew")?!0:!1;c?a.push(b+"("+l[b].current.toFixed(3)+l[b].units+")"):e.element.style[b]=""+l[b].current.toFixed(3)+l[b].units}a!==[]&&(e.element.style.transform=a.join(" "))}var h=null,b=Date.now(),l={},m=d.linear;(function(){for(var b in a.source)if(a.source.hasOwnProperty(b)&&parseFloat(a.source[b])!==parseFloat(a.target[b])){var c=a.source[b];
l[b]={from:parseFloat(c),current:parseFloat(c),to:parseFloat(a.target[b]),units:(""+c).replace(/\-?[\d\.]+/gi,"")}}a.easing&&d[a.easing]&&(m=d[a.easing])})();h=window.setInterval(function(){if(a.cancel)window.clearInterval(h);else{var e=Date.now(),d;if(e-b>=a.duration){window.clearInterval(h);for(d in l)f(d);g();c&&c()}else{e=m((e-b)/a.duration);for(d in l)f(d,e);g()}}},13)}}function A(d){return""+parseInt(d,10)===""+d?""+d+"px":d}function z(d){var e={type:"GET",url:null,contentType:"application/x-www-form-urlencoded",
data:!1,success:function(){},error:function(){},always:function(){}};d&&w(e,d);var a=new XMLHttpRequest;a.open(e.type,e.url,!0);a.setRequestHeader("Content-type",e.contentType);a.onreadystatechange=function(){if(4===a.readyState){try{var c=JSON.parse(a.responseText)}catch(k){c=a.responseText}c=[c,a];200<=a.status&&300>a.status?e.success.apply(e,c):e.error.apply(e,c);e.always.apply(e,c)}};e.data?a.send(e.data):a.send()}function E(d){return d.toLowerCase().replace(/-(.)/g,function(d,a){return a.toUpperCase()})}
function w(d,e){if("object"===typeof e&&"object"===typeof d)for(var a in e)e.hasOwnProperty(a)&&(d[a]=d[a]?w(d[a],e[a]):e[a]);else if(Array.isArray(e)&&Array.isArray(d))for(a=0;a<e.length;a++)-1===d.indexOf(e[a])&&d.push(e[a]);else d=e;return d}function d(d,e){for(var a=0;a<d.length;a++)if(-1!==e.indexOf(d[a]))return!0;return!1}function h(){var d=Array.prototype.map.call(arguments,function(a){return a/180*Math.PI}),e=d[0],a=d[2],c=a-e;d=d[3]-d[1];return 12745.6*Math.asin(Math.sqrt(Math.sin(c/2)*Math.sin(c/
2)+Math.sin(d/2)*Math.sin(d/2)*Math.cos(e)*Math.cos(a)))}var f={"_id":"59f85d56022d45e5bd3e949a","id":"444","name":"MPU","campaign_id":111,"width":"300","height":"250","content":"<style type=\"text/css\"> @font-face { font-family: \"GillSansforJLRegular\"; src: url(https://cdn.cabla.to/44/111/2873.woff); } </style> <style id=\"cb-styles\" type=\"text/css\">\n #block-444-1 { position: absolute; left: 25px; top: 151px; width: 250px; height: 1px; pointer-events: none; border-color: rgb(183, 183, 183); border-width: 1px; border-bottom-style: solid; }\n #fallback { position: absolute; left: 0px; top: 0px; width: 300px; height: 250px; background-repeat: no-repeat; background-size: contain; background-image: url(\"https://cdn.cabla.to/44/111/4176.jpg\"); }\n #block-444-1-6 { position: absolute; left: 0px; top: 0px; width: 0%; height: 100%; background-color: black; }\n #block-444-1-5 { position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; background-color: gray; }\n #block-444-1-4 { position: absolute; left: 0px; top: 0px; width: 79px; height: 14px; background-image: url(\"https://cdn.cabla.to/44/125/2923.png\"); }\n #block-444-1-3 { position: absolute; left: 24px; top: 69px; width: 79px; height: 14px; overflow: hidden; }\n #block-444-2-2 { position: absolute; left: 293px; top: 1px; width: 7px; height: 248px; background-color: white; pointer-events: none; border-right: 1px solid rgb(0, 0, 0); box-sizing: border-box; }\n #block-444-2-1 { position: absolute; left: 0px; top: 1px; width: 7px; background-color: white; height: 248px; pointer-events: none; border-left: 1px solid rgb(0, 0, 0); box-sizing: border-box; }\n #block-444-3-5 { position: absolute; left: 25px; top: 91px; width: 115px; height: 40px; font-family: GillSansforJLRegular; font-size: 17px; color: black; text-align: center; line-height: 42px; border-radius: 2px; pointer-events: none; border-color: black; border-width: 1px; border-style: solid; }\n #block-444-3-3 { position: absolute; left: 23px; top: 184.5px; width: 35px; height: 35px; background-image: url(\"https://cdn.cabla.to/44/125/2858.png\"); }\n #block-444-3-2 { position: absolute; left: 70px; top: 184.5px; width: 35px; height: 35px; background-image: url(\"https://cdn.cabla.to/44/125/2859.png\"); }\n #image-444-3-3 { position: absolute; left: 157px; top: 23px; width: 124px; height: 105px; background-repeat: no-repeat; background-size: contain; background-position: 50% 50%; }\n #text-444-3-2 { position: absolute; left: 25px; top: 48px; width: 90px; height: 24px; text-align: left; font-size: 16px; font-family: GillSansforJLRegular; color: rgb(113, 113, 113); }\n #text-444-3-1 { position: absolute; left: 25px; top: 23px; width: 120px; height: 21px; text-align: left; font-family: GillSansforJLRegular; font-size: 16px; color: rgb(55, 55, 55); overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }\n #block-444-3-1 { position: absolute; left: 0px; opacity: 0; display: none; top: 0px; width: 300px; height: 100%; }\n #retarget-444-3-1 { position: absolute; left: 0px; top: 0px; height: 100%; width: 100%; background-color: white; border-color: black; border-width: 1px; border-style: solid; box-sizing: border-box; }\n #image-444-3-1 { position: absolute; left: 186px; top: 169.5px; width: 100px; height: 64px; background-repeat: no-repeat; background-size: contain; background-image: url(\"https://cdn.cabla.to/44/111/3332.svg\"); pointer-events: none; }\n [cab-layer] { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; }</style> <script type=\"text/javascript\"> (function() { var p = creative.getLayer('retarget-444-3-1').element; var productsList = []; var currIndex = 0; var counter = 0; var interval; function pleft() { var s = p.querySelectorAll('[product-tile]'); if (s.length < 2) { return; } creative.animate(s[currIndex], { from: { opacity: '1' }, to: { opacity: '0' }, duration: 600, easing: 'easeInOut' }, function() { s[currIndex].style.display = 'none'; currIndex++; if (currIndex >= productsList.length) { currIndex = 0; } s[currIndex].style.display = 'block'; creative.animate(s[currIndex], { from: { opacity: '0' }, to: { opacity: '1' }, duration: 600, easing: 'easeInOut' }); }); }; function pright() { var s = p.querySelectorAll('[product-tile]'); if (s.length < 2) { return; } creative.animate(s[currIndex], { from: { opacity: '1' }, to: { opacity: '0' }, duration: 600, easing: 'easeInOut' }, function() { s[currIndex].style.display = 'none'; currIndex--; if (currIndex < 0) { currIndex = productsList.length - 1; } s[currIndex].style.display = 'block'; creative.animate(s[currIndex], { from: { opacity: '0' }, to: { opacity: '1' }, duration: 600, easing: 'easeInOut' }); }); } creative.addEventListener('product.click', function(url, id) { for (var i = 0; i < productsList.length; i++) { if (productsList[i].product_id === id && productsList[i].click_tracker) { creative.pixel(productsList[i].click_tracker); break; } } }); creative.addEventListener('ad.ready', function() { var s = p.querySelectorAll('[product-tile]')[0]; s.style.opacity = 1; s.style.display = 'block'; var s = p.querySelectorAll('[product-tile]'); for (var i = 0; i < s.length; i++) { if (!productsList[i].rating || parseFloat(productsList[i].rating) < 4) { s[i].querySelector('[cab-name=\"stars\"]').style.opacity = 0; } else { yellow = s[i].querySelector('[cab-name=\"yellow\"]'); yellow.style.width = (parseFloat(productsList[i].rating) * 20) + '%'; } } interval = setInterval(function() { pleft(); counter++; if (counter >= 5) { clearInterval(interval); } }, 3000); }); creative.addEventListener('products.received', function(products) { if (products.length == 1) { creative.getLayer('block-444-3-2').element.style.opacity = \"0\"; creative.getLayer('block-444-3-3').element.style.opacity = \"0\"; } productsList = products; if (products.length == 0 || products[0]._s === 'random') { creative.getLayer('fallback').show(); creative.fpSet('metric2', 'Fallback'); return; } if (products[0]._s === 'richrelevance') { creative.fpSet('metric2', 'Rich relevance'); } if (products[0]._s === 'same') { creative.fpSet('metric2', 'Same'); } }); var left = creative.getLayer('block-444-3-3'), right = creative.getLayer('block-444-3-2'); left.element.addEventListener('click', function() { pright(); clearInterval(interval); }); right.element.addEventListener('click', function() { pleft(); clearInterval(interval); }); })(); </script> <style id=\"cb-timelines\" type=\"text/css\"></style> <div cab-layer=\"retarget\" id=\"retarget-444-3-1\" cab-name=\"retarget-444-3-1\"> <div cab-layer=\"block\" cab-name=\"product\" product-tile=\"\" id=\"block-444-3-1\"> <div cab-layer=\"text\" cab-name=\"name\" id=\"text-444-3-1\">{{name}}</div> <div cab-layer=\"text\" cab-name=\"price\" id=\"text-444-3-2\">£{{price}}</div> <div cab-layer=\"image\" product-image=\"\" cab-name=\"product-image\" id=\"image-444-3-3\"></div> <div cab-layer=\"block\" id=\"block-444-1-3\" cab-name=\"stars\"> <div cab-layer=\"block\" id=\"block-444-1-5\" cab-name=\"rating\"> <div cab-layer=\"block\" id=\"block-444-1-6\" cab-name=\"yellow\"></div> </div> <div cab-layer=\"block\" id=\"block-444-1-4\" cab-name=\"overlay\"></div> </div> </div> </div> <div cab-layer=\"text\" id=\"block-444-3-5\" cab-name=\"CTA\">Shop now <div><br></div> </div> <div cab-layer=\"image\" id=\"image-444-3-1\" cab-name=\"logo\"></div> <div cab-layer=\"block\" id=\"block-444-1\" cab-name=\"line\"></div> <div cab-layer=\"block\" cab-name=\"slide-right\" id=\"block-444-3-2\"></div> <div cab-layer=\"block\" cab-name=\"slide-left\" id=\"block-444-3-3\"></div> <div cab-layer=\"block\" id=\"block-444-2-2\" cab-name=\"right border\"></div> <div cab-layer=\"block\" id=\"block-444-2-1\" cab-name=\"left border\"></div> <div cab-layer=\"image\" id=\"fallback\" cab-name=\"300x250_Backup\"></div><script type=\"text/json\" id=\"cb-settings\">{\"block-2\":{\"units\":\"px\",\"events\":{\"click\":[{\"name\":\"go\",\"settings\":{\"url\":\"https://www.johnlewis.com\"},\"$hashKey\":\"object:2318\"}]}},\"block-3\":{\"units\":\"px\"},\"image-5\":{\"units\":\"px\",\"events\":{\"click\":[{\"name\":\"script\",\"settings\":{\"script\":\"window.pslide(1);\\nclearInterval(window.t);\"},\"$hashKey\":\"object:1838\"},{\"name\":\"fingerprint\",\"settings\":{\"kpi\":\"arrow\",\"value\":\"right\"},\"$hashKey\":\"object:1842\"}]}},\"image-3\":{\"units\":\"px\",\"events\":{\"click\":[{\"name\":\"script\",\"settings\":{\"script\":\"window.pslide(0);\\nclearInterval(window.t);\"},\"$hashKey\":\"object:1818\"},{\"name\":\"fingerprint\",\"settings\":{\"kpi\":\"arrow\",\"value\":\"left\"},\"$hashKey\":\"object:1822\"}]}},\"block-5\":{\"units\":\"px\"},\"block-1\":{\"units\":\"px\"},\"block-8\":{\"units\":\"px\"},\"block-6\":{\"units\":\"px\"},\"block-7\":{\"units\":\"px\"},\"text-11\":{\"units\":\"px\"},\"swipeable-5\":{\"units\":\"px\",\"events\":{\"swipe-left\":[{\"name\":\"script\",\"settings\":{\"script\":\"window.pslide(1);\\nclearInterval(window.t);\"},\"$hashKey\":\"object:4975\"}],\"swipe-right\":[{\"name\":\"script\",\"settings\":{\"script\":\"window.pslide(0);\\nclearInterval(window.t);\"},\"$hashKey\":\"object:4990\"}]}},\"retarget-3\":{\"units\":\"px\",\"retarget\":{\"number\":\"5\",\"feed\":\"50\",\"strategy\":\"jlewis\",\"exclusive\":true}},\"block-4\":{\"units\":\"px\"},\"block-9\":{\"units\":\"px\"},\"image-7\":{\"units\":\"px\"},\"text-13\":{\"units\":\"px\"},\"text-5\":{\"units\":\"px\"},\"image-1\":{\"units\":\"px\"},\"image-444-3-1\":{\"events\":{}},\"retarget-444-3-1\":{\"retarget\":{\"feed\":50,\"number\":5,\"strategy\":\"jlrichrelevance\",\"exclusive\":true},\"events\":{}},\"block-444-3-3\":{\"events\":{\"click\":[]}},\"block-444-3-2\":{\"events\":{\"click\":[]}},\"block-444-3-1\":{\"events\":{}},\"image-444-3-3\":{\"events\":{}},\"text-444-3-2\":{\"events\":{}},\"text-444-3-1\":{\"events\":{}},\"block-444-3-5\":{\"events\":{}},\"block-444-2-1\":{\"events\":{}},\"block-444-2-2\":{\"events\":{}},\"block-444-1-3\":{\"events\":{}},\"block-444-1-5\":{\"events\":{}},\"block-444-1-6\":{\"events\":{}},\"block-444-1-4\":{\"events\":{}},\"fallback\":{\"events\":{\"click\":[{\"name\":\"go\",\"settings\":{\"url\":\"https://www.johnlewis.com/\"}}]},\"conditional\":{\"visibility\":true,\"segments\":[]}},\"block-444-1\":{\"events\":{}}}</script>","type":"dynamic","views":20899806,"engages":257083,"stats_change":"{\"impression\":[265355,244316,243803,229800,221885,245957,211740,217105],\"click\":[378,266,273,234,224,285,277,260],\"view\":[157876,141517,140522,130966,126104,141012,122252,126491],\"engage\":[2303,2046,2071,1865,1761,1957,1669,1983]}","campaign":{"id":"111","status":"running","advertiser":{"id":"44","active":1}},"impression":"f9098740-4f50-11e9-b63b-c5d2c34ac1cd","advertiser":"44","data":{"ids":{"cablato":"b5e04ad4-6a28-4f71-ae7c-826e160073ca"},"created":"2019-03-25T22:54:40.559Z","updated":"2019-03-25T22:54:40.559Z","segments":{},"products":{"2647416":{"counter":4,"last-hit":"2019-02-17T10:58:47.368Z","conversions":[],"meta":{}},"3103292":{"counter":2,"last-hit":"2019-02-17T10:57:52.026Z","conversions":[],"meta":{}},"3317136":{"counter":1,"last-hit":"2019-03-09T13:39:43.847Z","conversions":[],"meta":{}},"3373938":{"counter":1,"last-hit":"2019-02-17T10:49:18.434Z","conversions":[],"meta":{}},"3821678":{"counter":1,"last-hit":"2019-03-09T13:41:21.343Z","conversions":[],"meta":{}},"230213287":{"counter":4,"last-hit":"2019-02-17T10:59:51.996Z","conversions":[],"meta":{}}},"recommendations":[],"profile":{}},"dmp":"eu-dmp.cabla.to","self":"eu-ads.cabla.to"},H=this;(function(){function d(){var a=document.getElementById(h.ins);window.vpaid||(a.style.position="relative",a.style.overflow="hidden",a.style.width=A(f.width),a.style.height=A(f.height));new y(a,f)}function e(){a&&(window.mraid.removeEventListener("ready",e),a=!1);if(window.cbAds)for(var g in window.cbAds)if(window.cbAds.hasOwnProperty(g)&&""+g===""+f.id){h=window.cbAds[g];f.tag=h;f.preview&&(f.data.segments={});h.data&&
(f.data=w(f.data,h.data));h.tagging&&(f.tagging=w(f.tagging,h.tagging));h.segments&&("[object Array]"===Object.prototype.toString.call(h.segments)?h.segments.forEach(function(a){f.data.segments[a]={counter:1}}):(h.segments=h.segments.split(/[,|;]/i),h.segments.forEach(function(a){f.data.segments[a]={counter:1}})));c&&clearInterval(c);h.impression&&(g=new Image(1,1),g.onload=function(){},g.src=h.impression);window.vpaid&&(f.impression=window.vpaid.Ad.impression);"complete"===document.readyState||window.vpaid?
d():c=setInterval(function(){"complete"===document.readyState&&(clearInterval(c),d())},100);break}}var a=!1,c=null;if(window.cbAds[""+f.id]&&window.cbAds[""+f.id].mraid||f.mraid){var h=document.createElement("script");var m=document.getElementsByTagName("script")[0];h.src="mraid.js";m.parentNode.insertBefore(h,m)}window.mraid&&"loading"===window.mraid.getState()?(a=!0,window.mraid.addEventListener("ready",e)):e()})()})();
